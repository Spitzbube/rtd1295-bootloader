#==============================================================================
# SYSBRG2 Setting
#==============================================================================
w 0x1801a010,0x0000001f
w 0x1801a004,0x00000031

#==========================================================================================
# CRT Configuration
#==========================================================================================
#--------Powen On Status-------------------------------------------------------
w 0x18000018,0x00000001	#use 27MHz crystal as SCPU & SB2 clock source
w 0x18000014,0x00000003	#Clock enable for KCPU & SB2

w 0x18000100,0x00000000	#SCPU PLL off(only set [1:0]=2b'00)
w 0x18000110,0x00000004	#ACPU PLL off
w 0x18000118,0x00000004	#VCPU PLL off
w 0x18000128,0x00000004	#Display SD1 PLL off
w 0x18000158,0x00000000	#DDR PLL off(only set [1]=2b'0)
w 0x1800016c,0x00000004	#BUS PLL off
w 0x18000180,0x00000004	#Display SD2 PLL off
w 0x180001b8,0x00000004	#DCSB PLL off
w 0x180001c4,0x00000004	#GPU PLL off
w 0x180001c4,0x00000004	#GPU PLL off

#w 0x1800000c,0x00000000	#Disable all clock
##w 0x18000010,0x00000000	#Disable all clock

##-----Boot Sequence After Power On----------------------------------------------
##-----SCPU PLL------------------------------------------------------------------
w 0x18000104,0x03e32801	#866.66MHz
#w 0x18000104,0x04813001	#1000.00MHz
#w 0x18000104,0x04f7b801	#1100.01MHz
#w 0x18000104,0x056e3c01	#1200.01MHz
w 0x18000108,0x00000003
w 0x18000100,0x4d200043	#PLLSCPU_RSTB=1, Release reset & PLLSCPU_POW=1, power on 

##-----ACPU PLL------------------------------------------------------------------
w 0x1800010c,0x0873e600	#576MHz
w 0x18000110,0x00000005	#PLLACPU_POW=1, Power on
w 0x18000110,0x00000007	#PLLACPU_RSTB=1, Release reset
n 1000
w 0x18000110,0x00000003	#PLLACPU_OEB=0, Output enable

##-----VCPU PLL------------------------------------------------------------------
w 0x18000114,0x08605300 #324MHz
w 0x18000118,0x00000005	#PLLVCPU_POW=1, Power on
w 0x18000118,0x00000007	#PLLVCPU_RSTB=1, Release reset
n 1000
w 0x18000118,0x00000003	#PLLVCPU_OEB=0, Output enable

##-----DDR PLL-------------------------------------------------------------------
w 0x18000158,0x8780ff01	#PLLDDR_RSTB=0, reset
w 0x18000150,0x499ae156
w 0x18000154,0x21084210
w 0x1800015c,0x00000000
w 0x18000160,0x07084c00	#800MHz(DDR-1600)
#w 0x18000064,0x000c030d	#SSC setting
w 0x18000158,0x0780ff03	#DDRPLL_RST=1, release reset
w 0x18000158,0x0780ffff	#DDRPLL_CLK_OE=1, Output enable

##-----BUS PLL-------------------------------------------------------------------
w 0x18000164,0x00421b52	#486MHz
#w 0x18000168,0x00040028	#(*if modify, sync with ROM code)
w 0x1800016c,0x00000005	#PLLBUS_POW=1, Power on
w 0x1800016c,0x00000007	#PLLBUS_RSTB=1, Release reset
n 1000
w 0x1800016c,0x00000003	#PLLBUS_OEB=0, Output enable

##-----Display SD1 PLL(DDSA)-----------------------------------------------------
w 0x1800011c,0x0747d200	#432MHz
w 0x18000120,0x000006ff	#phase shifter
w 0x18000128,0x00000005	#PLLDDSA_POW=1, Power on
w 0x18000128,0x00000007	#PLLDDSA_RSTB=1, Release reset
w 0x18000124,0x00000005	#enable PSAUD1A, PSAUD2A
n 2000
w 0x18000128,0x00000003	#PLLDDSA_OEB=0, Output enable

##-----Display SD2 PLL(DDSB)-----------------------------------------------------
w 0x18000174,0x0747d200	#432MHz
w 0x18000178,0x000006ff	#phase shifter
w 0x18000180,0x00000005	#PLLDDSB_POW=1, Power on
w 0x18000180,0x00000007	#PLLDDSB_RSTB=1, Release reset
w 0x1800017c,0x00000005	#enable PSAUD1B, PSAUD2B
n 1000
w 0x18000180,0x00000003	#PLL_OEB=0, Output enable
w 0x18000184,0x0004007d	#M,N for 0.001 phase shift

##-----DCSB PLL -----------------------------------------------------------------
w 0x180001b0,0x002e1b52	#351MHz
#w 0x180001b4,0x00040028	#(*if modify, sync with ROM code)
w 0x180001b8,0x00000005	#PLL_POW=1, Power on
w 0x180001b8,0x00000007	#Release reset
n 1000
w 0x180001b8,0x00000003	#PLL_OEB=0, Output enable

##-----GCPU PLL------------------------------------------------------------------
w 0x180001c0,0x08605b00	#351MHz
w 0x180001c4,0x00000005	#PLL_POW=1, Power on
w 0x180001c4,0x00000007	#PLL_RSTB=1, Release reset
n 1000
w 0x180001c4,0x00000003	#PLL_OEB=0, Output enable

##//--------Clock select----------------------------------------------------------
w 0x18000030,0x00000000	#config SCPU/VCPU/ACPU/BUS Divider
w 0x1800004c,0x0000000a	#VE1 & VE2_core clock select

##//--------Module Clock & Resrt--------------------------------------------------
n 0x100
w 0x18000000,0xffffffff	#Release all reset
w 0x18000004,0xffffffff	#Release all reset
n 0x100
w 0x1800000c,0xffffffff	#Turn on all clock
w 0x18000010,0xffffffef	#Turn on all clock, except ACPU
n 0x100

#ISO block
w 0x18007060,0x00000000	#ETN no-bypass gphy ready mode
w 0x1800705c,0x00000003	#ETN power cut
w 0x18007074,0x05d87153	#Turn on PLL_ETN
w 0x1800708c,0x00001fbe	#Turn on ETN, I2C0, I2C6, UR0, IR, CEC/CBUS, VFD clock
w 0x18007088,0x00003f67	#Release reset for I2C0, I2C6, ETN, UR0, CEC/CBUS, IR, VFD
w 0x18007310,0x50500000	#ETN LED mux, ISO_GPIO13 mux
w 0x18007100,0x00002000	#ISO_GPIO13 output
w 0x18007104,0x00002000	#ISO_GPIO13 output high (USB2.0 power)
w 0x18007300,0x20000300 #Disable 5V pad poll low 
w 0x18007304,0x22032233 #Disable 5V pad poll low
w 0x18007308,0x00000a33 #Disable 5V pad poll low
w 0x1800039c,0x22222302 #Disable 5V pad poll low

w 0x1801a808,0x0000000f	#decrease the SPI speed
w 0x18000018,0x00000000	#use PLL as SCPU & SB2 clock source

#===============================================================================
# Enable HDMI
#===============================================================================
w 0x18000024,0x00018100	#for HDMI select
w 0x18000190,0x00000013
w 0x18000190,0x0000001b
w 0x18000194,0x0001c044	#27/27MHz
w 0x1800d044,0x5abc9014

#==============================================================================
# Enable Audio DAC
#==============================================================================
w 0x18006604,0xffffa

#==============================================================================
# DC Setting
#==============================================================================
w 0x18008004,0x014b2020
w 0x18008740,0x00000020
w 0x18008800,0x001cb817
w 0x18008804,0x04090921
w 0x18008808,0x0206050a
w 0x1800880c,0x1e02f0c5
w 0x18008810,0x03030c02
w 0x18008814,0x00100200
w 0x18008818,0x00200040
w 0x18008844,0x00060c71
w 0x18008848,0x00000018
w 0x18008820,0x00003fff
w 0x18008838,0x03000000
w 0x18008840,0x0a000000
w 0x18008840,0x0000c003
n 2000
w 0x18008840,0x03000000
n 5000
w 0x18008840,0x0c000000
w 0x1800884c,0x00000030
w 0x18008850,0x00000000
w 0x18008840,0x00200000
w 0x18008944,0x00000229
w 0x18008954,0x00006001
w 0x18008904,0x00002880
w 0x18008908,0x00000001
w 0x1800890c,0x00008034
w 0x18008928,0x0094067f
w 0x18008a40,0x00000000
w 0x18008a44,0x00000000
w 0x18008a48,0x00000000
w 0x18008a4c,0x00000000
w 0x18008a50,0x00000000
w 0x18008a54,0x00000000
w 0x18008a58,0x00000000
w 0x18008a5c,0x00000000
w 0x18008a60,0x00000000
w 0x18008a64,0x00000000
w 0x18008a68,0x00000000

# enable BISR(D$),MD
w 0x18007078,0x00000031

n 1000

# hack for r addr
#m 0x00020000,0xffffffff,0
#m 0x00020004,0xffffffff,0
#m 0x00022000,0xffffffff,0
#m 0x00022004,0xffffffff,0

n 1000

w 0x1801b100,0x00000020	#GPIO5 output
w 0x1801b110,0x00000020	#GPIO5 output high (USB3.0 power)

w 0x18008028,0x0e605014	#display priority



#=================================================================================================================
# LVDS clock Setting and Initial
#=================================================================================================================
#
w 0x180001d4,0x00000048					#(9+2)x27/(2+0)=148.5MHz
w 0x180001d0,0x0f944402					#PLL settings
w 0x18000024,0x00420000	# need double check		#LVDS clock select
#=================================================================================================================
# LVDS Setting and Initial
#=================================================================================================================
#
#**1920x1080 AUO M215HW03
w 0x18009804,0x00000118					#hsync 140x2 pixels
w 0x18009808,0x08980898					#2200 pixels per line
w 0x1800980c,0x010e088e					#1920 pixels active		**shieft 5x2 pixels**
w 0x18009810,0x002e0466					#1080 lines active
w 0x18009818,0x00000465					#1125 lines
w 0x1800981c,0x0001002e					#vsync 45 lines
w 0x1800982c,0x80000002					#enable line 1 interrupt to VCPU
w 0x18009008,0x00000001					#dual port
w 0x1800900c,0x000003c1					#Port AB, 8-bit
w 0x18009020,0x6DC06128					#PLL settings, divider 7
w 0x18009028,0x20602a00					#PLL power-on, PLL LVREG 1.2V
w 0x1800904c,0x00000001					#PLL LDO power-on
w 0x18009038,0x00000000
w 0x18009040,0x00000000
w 0x18009044,0x00000000
w 0x1800006c,0x00000085					#PLL SSC
w 0x18000094,0x00000001					#PLL SSC
w 0x1800006c,0x000001fd					#PLL SSC
w 0x18000094,0x00000001					#PLL SSC
#=================================================================================================================
# VO Setting and Initial
#=================================================================================================================
w 0x18005008,0x00000002					#Background mode: 0
w 0x18005008,0x00000011					#V1 enable
w 0x18005000,0x00000003					#CH1p enable
w 0x18005004,0x00000005					#Mixer1 to P-port
w 0x18005020,0x00001401					#seq mode, f422
w 0x18005038,0x02000000					#Y address
w 0x1800503C,0x03000000					#C address
w 0x18005048,0x00000780					#Y 1920 pitch
w 0x1800504c,0x00000780					#C 1920 pitch
w 0x18005068,0x00780438					#V1 1920x1080
w 0x18005604,0x07800438					#Mixer 1920x1080
w 0x1800564c,0x08000800					#color matrix with full range
w 0x18005650,0x00000800					#color matrix with full range
w 0x18005654,0x0ed93e81					#color matrix with full range
w 0x18005658,0x3c400c98					#color matrix with full range
w 0x18005660,0x31215336					#color matrix with full range
w 0x18005018,0x00000003					#M1GO
w 0x18005704,0x00000017					#TVE test mode
w 0x180056c4,0x00000003					#LVDS sync VO


#===============================================================================
# TVE
# output NTSC-J colorbar
#==============================================================================
#CRT settings
#----------------------------------------------------------
w 0x18000020,0x00000820 
w 0x18000024,0x00000131 
w 0x18018024,0x0200A000

#----------------------------------------------------------
#DAC control
#----------------------------------------------------------
w 0x18018208,0x00001F80 
w 0x18018210,0x02204000 
w 0x18018218,0x0000591E 
w 0x1801821C,0x0000591E 
w 0x1801836C,0x00000006 
w 0x180183A0,0xD48BD400 

#----------------------------------------------------------
#General control register
#----------------------------------------------------------
w 0x18018010,0x00003ffe 
w 0x18018010,0x00001003 
w 0x1801801c,0x0000007e 
w 0x18018020,0x0000007e 
w 0x1801801c,0x00000005 

#----------------------------------------------------------
#Sarnoff IP
#----------------------------------------------------------
#Reset Sarnoff IP------------------------------------------
w 0x18018038,0x00000001 
#Y gain----------------------------------------------------
w 0x18018A00,0x00000224 
w 0x18018880,0x0000001F 
w 0x18018884,0x0000007C 
w 0x18018888,0x000000F0 
w 0x1801888C,0x00000021 

#SCH phase-------------------------------------------------
w 0x18018890,0x00000000 
w 0x18018894,0x00000002 
w 0x18018898,0x00000002 
w 0x1801889C,0x00000044 
w 0x180188A0,0x00000002 	
#black and blank level-------------------------------------
w 0x180188A8,0x00000070 
w 0x180188AC,0x00000070 
w 0x180188B0,0x00000010 
#sync level------------------------------------------------
w 0x180188B4,0x00000007 	
#Y filter:select full BW-----------------------------------
w 0x180188B8,0x0000001C 
w 0x18018984,0x00000020 
#Chroma LPF bypass-----------------------------------------
w 0x1801898C,0x00000002 
w 0x180188BC,0x00000000 
#burst amplitude-------------------------------------------
w 0x180188C8,0x000000C8 
w 0x180188CC,0x00000000 
w 0x180188D0,0x00000000 
w 0x180188E0,0x00000008 
w 0x180188E4,0x00000031 
w 0x180188E8,0x00000006 
w 0x180188EC,0x00000006 
w 0x180188F0,0x000000B3 
w 0x180188F4,0x00000003 
w 0x180188F8,0x00000059 	
#raising and falling time----------------------------------
w 0x180189C0,0x00000064 
w 0x180189C4,0x0000002D 
w 0x180189C8,0x00000007 
#C unit Low pass filter gain-------------------------------
w 0x180189CC,0x00000014 
#----------------------------------------------------------
#H-Timing Setting
#----------------------------------------------------------
#sync timing-----------------------------------------------
w 0x180189D0,0x0000000C 
w 0x180189D4,0x0000004B 
w 0x180189D8,0x0000007A 
w 0x180189DC,0x0000002B 
#active video area-----------------------------------------
w 0x180189E0,0x00000085 
w 0x180189E4,0x000000AA 
#burst position--------------------------------------------
w 0x180189E8,0x0000005A 
w 0x180189EC,0x00000062 
w 0x180189F0,0x00000084 
#----------------------------------------------------------
#Sync generator register
#----------------------------------------------------------
w 0x18018004,0x02832359 
w 0x180180B0,0x00306505 
w 0x180180B4,0x00000359 
#----------------------------------------------------------
#Active video position registers
#----------------------------------------------------------
#interlaced Hpos
w 0x18018050,0x08212353 
w 0x1801805C,0x00815904 
w 0x18018060,0x0091CA0B 
#----------------------------------------------------------
#Slew rate and source control registers
#----------------------------------------------------------
#Active video slew rate
w 0x18018048,0x00000330 
w 0x18018040,0x0000007E
w 0x18018040,0x00000011 
w 0x18018074,0x0022CC82
w 0x18018000,0x00000AAA
w 0x18018000,0x00000030


#===============================================================================
# HDMI will run 297MHz all clock test mode
#===============================================================================
#w 0x18000190, 0x00000013 #repeat
#w 0x18000190, 0x0000001b #repeat
w 0x18000194, 0x00028011
w 0x1800d040, 0x0ffca492
w 0x1800d044, 0x5abc9010
w 0x1800d230, 0x06002217
w 0x1800d2a4, 0x0000ad22


#===============================================================================
#USB3.0 external loop back
#===============================================================================
##Force 3.0 port in host mode
w 0x18028110, 0x30c11004
## U3.0 port reset
#r 0x18020430
w 0x18020430, 0x00000000
w 0x18020430, 0x00000200
#r 0x18020430
#RLE0507D USB 3.0 PHY setting
w 0x18013210, 0x40080001
w 0x18013210, 0xA8780101
w 0x18013210, 0x60460201
w 0x18013210, 0x27710301
w 0x18013210, 0xB2F50401
w 0x18013210, 0x2AD70501
w 0x18013210, 0x00010601
w 0x18013210, 0x32000701
w 0x18013210, 0x35920801
w 0x18013210, 0x325C0901
w 0x18013210, 0xD6430A01
w 0x18013210, 0xE9090B01
w 0x18013210, 0xC0080C01
w 0x18013210, 0xFF280D01
w 0x18013210, 0x20100E01
w 0x18013210, 0x80000F01
w 0x18013210, 0x000C1001
w 0x18013210, 0x4C001101
w 0x18013210, 0xFC001201
w 0x18013210, 0x0C811301
w 0x18013210, 0xDE011401
w 0x18013210, 0x00001501
w 0x18013210, 0x00001601
w 0x18013210, 0x00001701
w 0x18013210, 0x00001801
w 0x18013210, 0x70041901
w 0x18013210, 0x12601A01
w 0x18013210, 0xFF0C1B01
w 0x18013210, 0xCB1C1C01
w 0x18013210, 0xA03F1D01
w 0x18013210, 0xC2001E01
w 0x18013210, 0x90001F01
w 0x18013210, 0xD4FF2001
w 0x18013210, 0xAAFF2101
w 0x18013210, 0x00512201
w 0x18013210, 0xDB602301
w 0x18013210, 0x80002401
w 0x18013210, 0x00002501
w 0x18013210, 0x00042601
w 0x18013210, 0x01D62701
w 0x18013210, 0xF8822801
w 0x18013210, 0x30802901
w 0x18013210, 0x30832A01
w 0x18013210, 0x20382B01
w 0x18013210, 0xFFFF2C01
w 0x18013210, 0xFFFF2D01
w 0x18013210, 0x00002E01
w 0x18013210, 0x00402F01
w 0x18013210, 0x325C0901
w 0x18013210, 0x305C0901
w 0x18013210, 0x325C0901
################################
## TX out; RX in pattern
################################
w 0x18013210, 0xD6430A01
w 0x18013210, 0xCB011C01
w 0x18013210, 0x8C951301
w 0x18013210, 0x84951301
w 0x18013210, 0x8C951301
w 0x18013210, 0xCC951301
w 0x18013210, 0x00001700
#r 0x18013210 		 #--Reg == 0x00ff1710
w 0x18013210, 0x00001800
#r 0x18013210		 #--Reg == 0x00001810 , pass

 

#===============================================================================
#USB2.0 in 3.0 port loop back
#===============================================================================
#Force 3.0 port in host mode
w 0x18028110, 0x30c11004
#2.0 PHY setting in 3.0 port
w 0x18013214, 0x0000009b
w 0x18028280, 0x02000400
w 0x18028280, 0x02000f00
w 0x18013214, 0x00000061
w 0x18028280, 0x02000000
w 0x18028280, 0x02000e00
w 0x18013214, 0x000000e1
w 0x18028280, 0x02000000
w 0x18028280, 0x02000e00
w 0x18013214, 0x0000009a
w 0x18028280, 0x02000200
w 0x18028280, 0x02000e00
w 0x18013214, 0x000000d9
w 0x18028280, 0x02000400
w 0x18028280, 0x02000e00
w 0x18013214, 0x0000001d
w 0x18028280, 0x02000500
w 0x18028280, 0x02000e00
w 0x18013214, 0x000000c0
w 0x18028280, 0x02000600
w 0x18028280, 0x02000e00
w 0x18013214, 0x0000009c
w 0x18028280, 0x02000100
w 0x18028280, 0x02000f00
w 0x18013214, 0x000000bb
w 0x18028280, 0x02000400
w 0x18028280, 0x02000f00
w 0x18013214, 0x00000025
w 0x18028280, 0x02000000
w 0x18028280, 0x02000e00
w 0x18013214, 0x000000af
w 0x18028280, 0x02000100
w 0x18028280, 0x02000e00
w 0x18013214, 0x0000009b
w 0x18028280, 0x02000400
w 0x18028280, 0x02000f00
w 0x18028280, 0x02000200
w 0x18028280, 0x02000c00
#r 0x18028280
##############################
##//USB2.0 bus loopback
##############################
#r 0x18028110
## Force 3.0 IP to Host mode
w 0x18028110, 0x30c11004
#r 0x18028110
w 0x1801322c, 0x00000000
w 0x18028200, 0x00002408
w 0x18013208, 0x00000001
w 0x18013208, 0x00000000
w 0x18013214, 0x000000fd
w 0x18028280, 0x02000000
w 0x18028280, 0x02000f00
w 0x18028280, 0x02000000
w 0x18028280, 0x02000d00
#r 0x18028280
w 0x1801321c, 0x00000802
w 0x18013218, 0x00000004
w 0x18013218, 0x00000000
w 0x18013218, 0x00000001
#r 0x18013220		 #-if Reg == 0x01, pass


#===============================================================================
#USB2.0 only port loop back
#===============================================================================
w 0x18013824, 0x00000061
w 0x180130a4, 0x00002000
w 0x180130a4, 0x00002e00
w 0x18013824, 0x000000e1
w 0x180130a4, 0x00002000
w 0x180130a4, 0x00002e00
w 0x18013824, 0x0000009a
w 0x180130a4, 0x00002200
w 0x180130a4, 0x00002e00
w 0x18013824, 0x000000d9
w 0x180130a4, 0x00002400
w 0x180130a4, 0x00002e00
w 0x18013824, 0x0000001d
w 0x180130a4, 0x00002500
w 0x180130a4, 0x00002e00
w 0x18013824, 0x000000c0
w 0x180130a4, 0x00002600
w 0x180130a4, 0x00002e00
w 0x18013824, 0x0000009c
w 0x180130a4, 0x00002100
w 0x180130a4, 0x00002f00
w 0x18013824, 0x000000bb
w 0x180130a4, 0x00002400
w 0x180130a4, 0x00002f00
w 0x18013824, 0x00000025
w 0x180130a4, 0x00002000
w 0x180130a4, 0x00002e00
w 0x18013824, 0x000000af
w 0x180130a4, 0x00002100
w 0x180130a4, 0x00002e00
w 0x18013824, 0x0000009b
w 0x180130a4, 0x00002400
w 0x180130a4, 0x00002f00
## USB2.0 LoopBack
w 0x18013824, 0x000000fd
w 0x180130a4, 0x00002000
w 0x180130a4, 0x00002f00
w 0x180130a4, 0x00002000
w 0x180130a4, 0x00002d00
#r 0x180130a4
#r 0x18013830
w 0x18013830, 0x00000402
w 0x1801382c, 0x00000004
w 0x1801382c, 0x00000000
w 0x1801382c, 0x00000002
#r 0x18013830 		 #-if Reg == 0x2402, pass


#===============================================================================
#ETN
#run GPHY_BIST pattern (FT 100m pattern)
#===============================================================================
#w 0x18016060, 0x801f0A42 #page 0xA42
#w 0x18016060, 0x00100000
##r 0x18016060 		 #bit[2:0]=3 PHY status
#w 0x18016060, 0x801f0A43 #page 0xA43
#w 0x18016060, 0x801b8184 #item selection for mpbist
#w 0x18016060, 0x801c0f00 #10 mdi/mdix, 100mdix,giga nway open loopback
#w 0x18016060, 0x801f0A47 #page 0xA47
#w 0x18016060, 0x80110100 #bit[8]=1, mpbist enable
##n 280ms
#n 1000000 
#w 0x18016060, 0x00110000
##r 0x18016060		 #bit[8]=0, mpbist done
#w 0x18016060, 0x801f0A43 #page 0xA43
#w 0x18016060, 0x801b8186 #read result for mpbist
#w 0x18016060, 0x001c0000 #read
##r 0x18016060		 #reg28, bit[8~11]=1 lbk done
#w 0x18016060, 0x801b8188 #read fail case for mpbist
#w 0x18016060, 0x001c0000 #read
##r 0x18016060		 #reg28, bit[8~11]=0                #all pass

